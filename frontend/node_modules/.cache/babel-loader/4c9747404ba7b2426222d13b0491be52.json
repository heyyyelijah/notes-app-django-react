{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/Desktop/youtubeProjects/dj-ivanov/react_django/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Admin/Desktop/youtubeProjects/dj-ivanov/react_django/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Admin/Desktop/youtubeProjects/dj-ivanov/react_django/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Admin/Desktop/youtubeProjects/dj-ivanov/react_django/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{useParams,Link,useNavigate}from'react-router-dom';import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NotePage(){var navigate=useNavigate();var params=useParams();var noteId=params.id;// gets the note that has the same id as the one in the url parameters\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];function getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!==''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=cookies[i].trim();// Does this cookie string begin with the name we want?\nif(cookie.substring(0,name.length+1)===name+'='){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}var csrftoken=getCookie('csrftoken');var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(noteId));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('create note triggered');_context2.next=3;return fetch(\"/api/notes/create\",{// specifies the method as PUT or Update\nmethod:'POST',// specifies the content as a JSON data\nheaders:{'Content-Type':'application/json','X-CSRFToken':csrftoken},//\nbody:JSON.stringify(note)});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function createNote(){return _ref2.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log('updateNote Triggered');_context3.next=3;return fetch(\"/api/notes/\".concat(noteId,\"/update \"),{// specifies the method as PUT or Update\nmethod:'PUT',// specifies the content as a JSON data\nheaders:{'Content-Type':'application/json','X-CSRFToken':csrftoken},//\nbody:JSON.stringify(_objectSpread(_objectSpread({},note),{},{'updated':new Date()}))});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function updateNote(){return _ref3.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log('deleteNote Triggered');_context4.next=3;return fetch(\"/api/notes/\".concat(noteId,\"/delete\"),{'X-CSRFToken':csrftoken,method:'DELETE',// specifies the content as a JSON data\nheaders:{'Content-Type':'application/json','X-CSRFToken':csrftoken},//\nbody:JSON.stringify({note:note})});case 3:// after api call to delete said note, go navigate back to home url\nnavigate(\"/\");case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteId!==\"new\"&&note.body===\"\"){deleteNote();}else if(noteId!==\"new\"){updateNote();}else if(noteId===\"new\"&&note===null){navigate('/');return;}else if(noteId===\"new\"&&note.body!==\"\"){createNote();}navigate('/');};useEffect(function(){getNote();},[noteId]);// RENDERS A PAGE FOR A SINGLE NOTE\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{value:note===null||note===void 0?void 0:note.body,onChange:function onChange(e){setNote(_objectSpread(_objectSpread({},note),{},{'body':e.target.value}));}})]});}export default NotePage;","map":{"version":3,"names":["ReactComponent","ArrowLeft","useParams","Link","useNavigate","React","useState","useEffect","NotePage","navigate","params","noteId","id","note","setNote","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","csrftoken","getNote","fetch","response","json","data","createNote","console","log","method","headers","body","JSON","stringify","updateNote","Date","deleteNote","handleSubmit","e","target","value"],"sources":["C:/Users/Admin/Desktop/youtubeProjects/dj-ivanov/react_django/myNotes/frontend/src/pages/NotePage.jsx"],"sourcesContent":["import { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg';\r\nimport {useParams, Link, useNavigate } from 'react-router-dom';\r\nimport React, { useState, useEffect } from 'react';\r\n\r\n\r\n\r\nfunction NotePage() {\r\n  let navigate = useNavigate();\r\n  let params = useParams();\r\n  let noteId = params.id;\r\n  // gets the note that has the same id as the one in the url parameters\r\n  let [note, setNote] = useState(null);\r\n\r\n\r\n  function getCookie(name) {\r\n    let cookieValue = null;\r\n    if (document.cookie && document.cookie !== '') {\r\n        const cookies = document.cookie.split(';');\r\n        for (let i = 0; i < cookies.length; i++) {\r\n            const cookie = cookies[i].trim();\r\n            // Does this cookie string begin with the name we want?\r\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return cookieValue;\r\n}\r\n\r\nconst csrftoken = getCookie('csrftoken');\r\n\r\n\r\n\r\n  let getNote = async () => {\r\n    // \r\n    if(noteId === 'new') return\r\n\r\n    let response = await fetch(`/api/notes/${noteId}`)\r\n    let data = await response.json()\r\n    setNote(data)\r\n  }\r\n\r\n\r\n  let createNote = async () => {\r\n    console.log('create note triggered');\r\n\r\n    await fetch(`/api/notes/create`, {\r\n      // specifies the method as PUT or Update\r\n      method: 'POST',\r\n      // specifies the content as a JSON data\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-CSRFToken': csrftoken\r\n      },\r\n      //\r\n      body: JSON.stringify(note) \r\n    })\r\n  }\r\n\r\n\r\n  let updateNote = async () => {\r\n    console.log('updateNote Triggered');\r\n\r\n    await fetch(`/api/notes/${noteId}/update `, {\r\n      // specifies the method as PUT or Update\r\n      method: 'PUT',\r\n      // specifies the content as a JSON data\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-CSRFToken': csrftoken\r\n      },\r\n      //\r\n      body: JSON.stringify({...note, 'updated': new Date()}) \r\n    })\r\n  }\r\n\r\n\r\n  let deleteNote = async () => {\r\n\r\n    console.log('deleteNote Triggered');\r\n\r\n    await fetch(`/api/notes/${noteId}/delete`, {\r\n      'X-CSRFToken': csrftoken,\r\n\r\n      method: 'DELETE',\r\n      // specifies the content as a JSON data\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-CSRFToken': csrftoken\r\n      },\r\n      //\r\n      body: JSON.stringify({note}) \r\n    })\r\n\r\n    // after api call to delete said note, go navigate back to home url\r\n    navigate(\"/\");\r\n  }\r\n\r\n\r\n  let handleSubmit = () => {\r\n    if (noteId!==\"new\" && note.body===\"\"){\r\n        deleteNote()\r\n    }else if(noteId!==\"new\"){\r\n        updateNote()\r\n    }\r\n    else if(noteId===\"new\" && note===null){\r\n        navigate('/')\r\n        return\r\n    }\r\n    else if(noteId===\"new\" && note.body!==\"\"){\r\n        createNote()\r\n    }\r\n    \r\n    navigate('/')\r\n  }\r\n\r\n  useEffect(() => {\r\n    getNote();\r\n  }, [noteId])\r\n\r\n\r\n  // RENDERS A PAGE FOR A SINGLE NOTE\r\n  return (\r\n    <div className='note'>\r\n      <div className='note-header'>\r\n        <h3>\r\n          <Link to={`/`} >\r\n            <ArrowLeft onClick={handleSubmit}/>\r\n          </Link>\r\n        </h3>\r\n\r\n        {noteId !== 'new' ? \r\n          (<button onClick={deleteNote}>Delete</button>) \r\n          : \r\n          (<button onClick={handleSubmit}>Done</button>)\r\n          }\r\n        \r\n      </div>\r\n        \r\n      {/* onChange sets the state of note updating it on click */}\r\n      <textarea value={note?.body} onChange={(e) => { setNote({...note, 'body': e.target.value}) }}>\r\n        \r\n      </textarea>  \r\n      \r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default NotePage"],"mappings":"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"},"metadata":{},"sourceType":"module"}