{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/Desktop/youtubeProjects/dj-ivanov/react_django/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Admin/Desktop/youtubeProjects/dj-ivanov/react_django/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Admin/Desktop/youtubeProjects/dj-ivanov/react_django/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Admin/Desktop/youtubeProjects/dj-ivanov/react_django/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{useParams,Link,useNavigate}from'react-router-dom';import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NotePage(){var navigate=useNavigate();var params=useParams();var noteId=params.id;// gets the note that has the same id as the one in the url parameters\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(noteId));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('create note triggered');_context2.next=3;return fetch(\"/api/notes/create\",{// specifies the method as PUT or Update\nmethod:'POST',// specifies the content as a JSON data\nheaders:{'Content-Type':'application/json'},//\nbody:JSON.stringify(note)});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function createNote(){return _ref2.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log('updateNote Triggered');_context3.next=3;return fetch(\"/api/notes/\".concat(noteId,\"/update \"),{// specifies the method as PUT or Update\nmethod:'PUT',// specifies the content as a JSON data\nheaders:{'Content-Type':'application/json'},//\nbody:JSON.stringify(_objectSpread(_objectSpread({},note),{},{'updated':new Date()}))});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function updateNote(){return _ref3.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log('deleteNote Triggered');_context4.next=3;return fetch(\"/api/notes/\".concat(noteId,\"/delete\"),{method:'DELETE',// specifies the content as a JSON data\nheaders:{'Content-Type':'application/json'},//\nbody:JSON.stringify({note:note})});case 3:// after api call to delete said note, go navigate back to home url\nnavigate(\"/\");case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteId!=='new'&&!note.body){deleteNote();}else if(noteId!=='new'){updateNote();}else if(noteId==='new'&&note.body!==null){createNote();}navigate('/');};useEffect(function(){getNote();},[noteId]);// RENDERS A PAGE FOR A SINGLE NOTE\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{value:note===null||note===void 0?void 0:note.body,onChange:function onChange(e){setNote(_objectSpread(_objectSpread({},note),{},{'body':e.target.value}));}})]});}export default NotePage;","map":{"version":3,"names":["ReactComponent","ArrowLeft","useParams","Link","useNavigate","React","useState","useEffect","NotePage","navigate","params","noteId","id","note","setNote","getNote","fetch","response","json","data","createNote","console","log","method","headers","body","JSON","stringify","updateNote","Date","deleteNote","handleSubmit","e","target","value"],"sources":["C:/Users/Admin/Desktop/youtubeProjects/dj-ivanov/react_django/myNotes/frontend/src/pages/NotePage.jsx"],"sourcesContent":["import { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg';\r\nimport {useParams, Link, useNavigate } from 'react-router-dom';\r\nimport React, { useState, useEffect } from 'react';\r\n\r\n\r\n\r\nfunction NotePage() {\r\n  let navigate = useNavigate();\r\n  let params = useParams();\r\n  let noteId = params.id;\r\n  // gets the note that has the same id as the one in the url parameters\r\n  let [note, setNote] = useState(null);\r\n\r\n\r\n  let getNote = async () => {\r\n    // \r\n    if(noteId === 'new') return\r\n\r\n    let response = await fetch(`/api/notes/${noteId}`)\r\n    let data = await response.json()\r\n    setNote(data)\r\n  }\r\n\r\n\r\n  let createNote = async () => {\r\n    console.log('create note triggered');\r\n\r\n    await fetch(`/api/notes/create`, {\r\n      // specifies the method as PUT or Update\r\n      method: 'POST',\r\n      // specifies the content as a JSON data\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      //\r\n      body: JSON.stringify(note) \r\n    })\r\n  }\r\n\r\n\r\n  let updateNote = async () => {\r\n    console.log('updateNote Triggered');\r\n\r\n    await fetch(`/api/notes/${noteId}/update `, {\r\n      // specifies the method as PUT or Update\r\n      method: 'PUT',\r\n      // specifies the content as a JSON data\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      //\r\n      body: JSON.stringify({...note, 'updated': new Date()}) \r\n    })\r\n  }\r\n\r\n\r\n  let deleteNote = async () => {\r\n\r\n    console.log('deleteNote Triggered');\r\n\r\n    await fetch(`/api/notes/${noteId}/delete`, {\r\n      method: 'DELETE',\r\n      // specifies the content as a JSON data\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      //\r\n      body: JSON.stringify({note}) \r\n    })\r\n\r\n    // after api call to delete said note, go navigate back to home url\r\n    navigate(\"/\");\r\n  }\r\n\r\n\r\n  let handleSubmit = () => {\r\n    if(noteId !== 'new' && !note.body) {\r\n      deleteNote()\r\n    } else if(noteId !== 'new') {\r\n      updateNote()\r\n    } else if(noteId === 'new' && note.body !== null) {\r\n      createNote()\r\n    }\r\n\r\n    navigate('/');\r\n  }\r\n\r\n  useEffect(() => {\r\n    getNote();\r\n  }, [noteId])\r\n\r\n\r\n  // RENDERS A PAGE FOR A SINGLE NOTE\r\n  return (\r\n    <div className='note'>\r\n      <div className='note-header'>\r\n        <h3>\r\n          <Link to={`/`} >\r\n            <ArrowLeft onClick={handleSubmit}/>\r\n          </Link>\r\n        </h3>\r\n\r\n        {noteId !== 'new' ? \r\n          (<button onClick={deleteNote}>Delete</button>) \r\n          : \r\n          (<button onClick={handleSubmit}>Done</button>)\r\n          }\r\n        \r\n      </div>\r\n        \r\n      {/* onChange sets the state of note updating it on click */}\r\n      <textarea value={note?.body} onChange={(e) => { setNote({...note, 'body': e.target.value}) }}>\r\n        \r\n      </textarea>  \r\n      \r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default NotePage"],"mappings":"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"},"metadata":{},"sourceType":"module"}